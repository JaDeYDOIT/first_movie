<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- payment.xml -->

<mapper namespace="payment">
	<select id="list" resultType="kr.co.fmos.payment.PaymentDTO">
	SELECT payment_id, member_id, movie_information_id, adult, student,
	silver, price, pay_discount, pay_type, refund, pay_datetime
	FROM payment
	</select>
	
	<select id="selectPaymentByScreenMovieInfoId" parameterType="String"
	resultType="kr.co.fmos.payment.PaymentDTO">
	SELECT payment_id, member_id, movie_information_id, adult, student,
	silver, price, pay_discount, pay_type, refund, pay_datetime
	FROM payment
	WHERE movie_information_id=#{screenMovieInfoID}
	</select>

	<insert id="insertAndWithReturnID" useGeneratedKeys="true"
		keyProperty="payment_id" parameterType="kr.co.fmos.payment.PaymentDTO">
		<selectKey keyProperty="payment_id" resultType="int"
			order="AFTER">
			SELECT LAST_INSERT_ID() as payment_id
		</selectKey>

		INSERT INTO
		payment (member_id, movie_information_id, adult, student,
		silver, price, pay_discount, pay_type, refund) VALUES
		(#{member_id},
		#{movie_information_id},
		#{adult},
		#{student},
		#{silver},
		#{price},
		#{pay_discount},
		#{pay_type},
		#{refund})
	</insert>
</mapper>